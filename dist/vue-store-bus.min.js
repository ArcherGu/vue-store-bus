/*!
 * vue-store-bus v1.1.0
 * https://github.com/ArcherGu/vue-store-bus.git
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).VueStoreBus=e()}(this,function(){"use strict";function t(t,e){var o=new t({router:e,mixins:"object"==typeof e?[{watch:{$route:function(t,e){t.path!==e.path&&e.path===this.currentStore.route&&(this.destroyNameSpace(this.currentStore.namespace),this.currentStore.namespace=void 0,this.currentStore.route=void 0)}}}]:[],data:{busStore:{},callbackStore:{},currentStore:{namespace:void 0,route:void 0}},methods:{createNameSpace:function(t){void 0===this.busStore[t]&&(this.$set(this.busStore,t,{}),"object"==typeof this.$route&&(this.currentStore.namespace=t,this.currentStore.route=this.$route.path)),void 0===this.callbackStore[t]&&this.$set(this.callbackStore,t,{})},destroyNameSpace:function(t){if("object"==typeof this.callbackStore[t])for(var e in this.callbackStore[t])"function"==typeof this.callbackStore[t][e]&&this.callbackStore[t][e]();this.$delete(this.busStore,t),this.$delete(this.callbackStore,t)},getNameSpaceVal:function(t){if(void 0!==this.busStore[t])return this.busStore[t];console.error("Non-existing namespace!")},setVal:function(t,e,o){void 0===o&&(o=function(t){});var i=t.split("/");i&&i.lenght<2?console.error("You have to add a namespace!"):(void 0!==this.busStore[i[0]]&&void 0!==this.callbackStore[i[0]]||this.createNameSpace(i[0]),void 0===this.busStore[i[0]][i[1]]?this.$set(this.busStore[i[0]],i[1],e):this.busStore[i[0]][i[1]]=e,"function"!=typeof o&&(o=function(t){}),void 0===this.callbackStore[i[0]][i[1]]?this.$set(this.callbackStore[i[0]],i[1],o):this.callbackStore[i[0]][i[1]]=o)},getVal:function(t,e){void 0===e&&(e=void 0);var o=t.split("/");if(!(o&&o.lenght<2))return void 0===this.busStore[o[0]]||void 0===this.busStore[o[0]][o[1]]?e:this.busStore[o[0]][o[1]];console.error("You must specify a namespace!")},delVal:function(t){var e=t.split("/");e&&e.lenght<2?console.error("You must specify a namespace!"):void 0!==this.busStore[e[0]]?("object"==typeof this.callbackStore[e[0]]&&"function"==typeof this.callbackStore[e[0]][e[1]]&&this.callbackStore[e[0]][e[1]](),this.$delete(this.busStore[e[0]],e[1]),this.$delete(this.callbackStore[e[0]],e[1])):console.error("Non-existing namespace!")},getStore:function(){return this.busStore},getCurrentStore:function(){return this.currentStore}}});Object.defineProperties(o,{on:{get:function(){return this.$on.bind(this)}},once:{get:function(){return this.$once.bind(this)}},off:{get:function(){return this.$off.bind(this)}},emit:{get:function(){return this.$emit.bind(this)}}}),Object.defineProperty(t,"bus",{get:function(){return o}}),Object.defineProperty(t.prototype,"$bus",{get:function(){return o}})}return"undefined"!=typeof window&&window.Vue&&window.Vue.use(t),t});